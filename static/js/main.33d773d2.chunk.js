(this["webpackJsonpreact-context-demo"]=this["webpackJsonpreact-context-demo"]||[]).push([[0],{14:function(t,n,e){},16:function(t,n,e){"use strict";e.r(n);var o=e(1),i=e.n(o),r=e(8),u=e.n(r),c=(e(14),e(6)),a=e(5),d=e(4),s=e(2),l=e(3),f=e(9),b=e(0),h=new(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,t),this.state=n,this.listeners=new Set}return Object(l.a)(t,[{key:"subscribe",value:function(t){var n=this;return this.listeners.add(t),function(){return n.listeners.delete(t)}}},{key:"notify",value:function(){var t=this;this.listeners.forEach((function(n){return n(t.state)}))}},{key:"update",value:function(t){var n=Object(f.a)(this.state,(function(n){t(n)}));n&&n!==this.state&&(this.state=n,this.notify())}}]),t}())({saving:!1,loading:!1,todo:{title:"",done:!1},todos:[]}),j=function(){return h.update((function(t){return t.saving=!0})),new Promise((function(t){setTimeout((function(){h.update((function(n){var e=n.todo;e.id?n.todos=n.todos.map((function(t){return t.id===e.id?e:t})):(e.id=Math.random(),n.todos.push(e)),n.todo={title:"",done:!1},n.saving=!1,t()}))}),1e3)}))},p=function(t){h.update((function(n){var e=n.todo=Object(d.a)(Object(d.a)({},n.todo),t);e.id&&(n.todos=n.todos.map((function(t){return t.id===e.id?e:t})))}))},v=function(t){return h.update((function(t){return t.saving=!0})),new Promise((function(n){setTimeout((function(){return h.update((function(n){n.todos=n.todos.filter((function(n){return n.id!==t.id})),n.todo={title:"",done:!1},n.saving=!1}))}),1e3)}))},O=i.a.createContext(),m=O.Provider,g=O.Consumer,x=function(t){return function(n){return function(e){return Object(b.jsx)(g,{children:function(o){var i=t(o);return Object(b.jsx)(n,Object(d.a)(Object(d.a)({},e),i))}})}}},y=function(t){Object(c.a)(e,t);var n=Object(a.a)(e);function e(){return Object(s.a)(this,e),n.apply(this,arguments)}return Object(l.a)(e,[{key:"render",value:function(){var t=this.props.todo;return Object(b.jsxs)("li",{onClick:function(n){return function(t){h.update((function(n){n.todo=t}))}(t)},children:[Object(b.jsx)("input",{type:"checkbox",checked:t.done,onChange:function(n){return p({done:!t.done})}}),t.title]},t.id)}}]),e}(o.PureComponent),k=x((function(t){return{todos:t.todos,loading:t.loading,completed:t.todos.filter((function(t){return t.done})).length}}))((function(t){var n=t.loading,e=t.todos,o=t.completed;return n?Object(b.jsx)("div",{children:"Loading"}):Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsx)("ul",{children:e.map((function(t){return Object(b.jsx)(y,{todo:t},t.id)}))}),Object(b.jsxs)("div",{children:["Completed: ",o]})]})})),C=function(t){Object(c.a)(e,t);var n=Object(a.a)(e);function e(){var t;Object(s.a)(this,e);for(var o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return(t=n.call.apply(n,[this].concat(r))).input=i.a.createRef(),t.onSubmit=function(n){n.preventDefault(),j().then((function(){t.input.current.value="",t.input.current.focus()}))},t}return Object(l.a)(e,[{key:"render",value:function(){var t=this.props,n=t.todo,e=t.saving,o=t.updateTodo,i=t.removeTodo;return Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsx)("input",{type:"text",ref:this.input,disabled:e,value:n.title,onChange:function(t){return o({title:t.target.value})}}),Object(b.jsx)("button",{disabled:e,children:"Add"}),n.id&&Object(b.jsx)("button",{type:"button",disabled:e,onClick:function(t){return i(n)},children:"Delete"})]})}}]),e}(o.PureComponent),w=x((function(t){return{todo:t.todo,saving:t.saving,updateTodo:p,removeTodo:v}}))(C),T=function(t){Object(c.a)(e,t);var n=Object(a.a)(e);function e(){var t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=n.call.apply(n,[this].concat(i))).state=h.state,t}return Object(l.a)(e,[{key:"componentWillMount",value:function(){var t=this;this.unsubscribe=h.subscribe((function(n){return t.setState(n)}))}},{key:"componentDidMount",value:function(){h.update((function(t){return t.loading=!0})),new Promise((function(t){setTimeout((function(){h.update((function(n){n.todos=[{id:Math.random(),title:"Hello...",done:!1},{id:Math.random(),title:"World...",done:!1},{id:Math.random(),title:"Hello World...",done:!0}],n.loading=!1,t()}))}),1e3)}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return Object(b.jsx)(m,{value:this.state,children:Object(b.jsxs)("div",{children:[Object(b.jsx)(w,{}),Object(b.jsx)(k,{})]})})}}]),e}(o.Component),P=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,17)).then((function(n){var e=n.getCLS,o=n.getFID,i=n.getFCP,r=n.getLCP,u=n.getTTFB;e(t),o(t),i(t),r(t),u(t)}))};u.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(T,{})}),document.getElementById("root")),P()}},[[16,1,2]]]);
//# sourceMappingURL=main.33d773d2.chunk.js.map